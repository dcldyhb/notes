# 汇报

## 项目进展情况

目前在 wsl 上配置了 VSR-DPG 模型，并且使用极端气象数据集获得的极端气象场景下微电网系统中的电气工况数据对 VSR-DPG 模型进行了训练，根据数据修改了代码，得到了大量的数据

### 具体的成果

- 通过对储能（ESS）、光伏（PV）和风电（WT）等多个目标的符号回归，对系统的核心控制逻辑和物理规律有了一定的了解

#### 储能系统 (Energy Storage System - ESS)

##### `yhat_ess1_down`

![yhat_ess1_down_pdp_02_elec_vmax_nonslack](https://raw.githubusercontent.com/dcldyhb/Freshman-Notes-Image-Host/main/yhat_ess1_down_pdp_02_elec_vmax_nonslack.png)

- **影响特征**：`elec_soc_4` 和 `elec_vmax_nonslack`

- **关系分析**：

  - PDP 图显示 `yhat_ess1_down` 与 `elec_vmax_nonslack` 和 `elec_soc_4` 存在近似线性的正相关关系。
  - 敏感度分析图显示 `elec_vmax_nonslack` 具有最高的局部敏感度。

- **符号回归最佳方程**：
  $$
  \text{yhat\_ess1\_down} = 0.342 \times \text{elec\_soc\_4} \times \sin(\text{elec\_vmax\_nonslack})
  $$
  *这个方程结合了两个主要特征，但其正弦关系与 PDP 图中观察到的线性关系不完全一致，这可能是模型拟合不佳的表现。*

##### `yhat_ess1_up`

- **主要影响特征**：`elec_vmax_nonslack` 和 `elec_soc_5`。

- **关系分析**：

  - PDP 图显示 `yhat_ess1_up` 与 `elec_vmax_nonslack` 和 `elec_soc_5` 均呈线性正相关。
  - 敏感度分析图显示 `elec_vmax_nonslack` 的局部影响最大。

- **符号回归最佳方程**：
  $$
  \text{yhat\_ess1\_up} = 0.00575 \times (\text{elec\_soc\_5})^2 + 0.622 \times \sin(\text{elec\_vmax\_nonslack})
  $$
  *此方程同样识别了这两个特征，但将其建模为二次和正弦关系的和。*

##### `yhat_ess2_down` 和 `yhat_ess3_down`

- **主要影响特征**：`elec_soc_5` (对于 `ess2`) 和 `elec_soc_2` (对于 `ess3`)。

- **关系分析**：

  - PDP 图显示目标变量与各自对应的 `elec_soc` 特征呈线性正相关。
  - 这两个模型的敏感度分析图似乎未能正确生成条形图。

- **符号回归最佳方程**：
  $$
  \text{yhat\_ess2\_down} = 0.00582 \times (\text{elec\_soc\_5})^2
  $$

  $$
  \text{yhat\_ess3\_down} = 0.00574 \times (\text{elec\_soc\_2})^2
  $$

  *符号回归将 PDP 图中的线性关系建模为了一个简单的二次关系。*

##### `yhat_ess2_up`

- **主要影响特征**：`elec_vavg` 和 `elec_soc_2`。

- **关系分析**：

  - PDP 图显示目标变量与 `elec_vavg` 和 `elec_soc_2` 均呈线性正相关。
  - 敏感度分析图显示 `elec_vavg` 的影响最大。

- **符号回归最佳方程**：
  $$
  \text{yhat\_ess2\_up} = \frac{0.00323 \times (\text{elec\_soc\_2})^2}{\cos(\text{elec\_vavg})}
  $$
  *该方程结构复杂，包含二次、余弦和除法运算，表明模型可能在进行过拟合或寻找复杂但无效的模式。*

##### `yhat_ess3_up`

- **主要影响特征**：`elec_vmin` 和 `elec_soc_5`。

- **关系分析**：

  - PDP 图显示 `yhat_ess3_up` 与 `elec_vmin` 呈线性**负**相关，与 `elec_soc_5` 呈线性**正**相关。
  - 敏感度分析图显示 `elec_vmin` 的影响最大。

- **符号回归最佳方程**：
  $$
  \text{yhat\_ess3\_up} = 0.0104 \times (\text{elec\_soc\_5})^2 \times \cos(\text{elec\_vmin})
  $$
  *此方程结合了两个主要特征。*

##### `yhat_ess4_down`

- **主要影响特征**：`elec_vmin` 和 `elec_soc_1`。

- **关系分析**：

  - PDP 图显示 `yhat_ess4_down` 与 `elec_vmin` 呈线性**负**相关，与 `elec_soc_1` 呈线性**正**相关。
  - 敏感度分析图显示 `elec_vmin` 的影响远大于其他特征。

- **符号回归最佳方程**：
  $$
  \text{yhat\_ess4\_down} = 0.00943 \times (\text{elec\_soc\_1})^2 \times \cos(\text{elec\_vmin})
  $$
  *该方程与 `yhat_ess3_up` 的结构相似，反映了 `elec_vmin` 的重要性。*

##### `yhat_ess4_up` 和 `yhat_ess5_up`

- **主要影响特征**：`elec_soc_2` (对于 `ess4`) 和 `elec_soc_5` (对于 `ess5`)。

- **关系分析**：

  - PDP 图显示目标变量与各自对应的 `elec_soc` 特征呈线性正相关。
  - 敏感度分析图未能正确生成。

- **符号回归最佳方程**：
  $$
  \text{yhat\_ess4\_up} = 0.0104 \times (\text{elec\_soc\_2})^2
  $$

  $$
  \text{yhat\_ess5\_up} = 0.00608 \times (\text{elec\_soc\_5})^2
  $$

  *模型再次将线性关系拟合为简单的二次关系。*

##### `yhat_ess5_down`

- **主要影响特征**：`elec_soc_3` 和 `elec_soc_4`。

- **关系分析**：

  - PDP 图显示目标变量与 `elec_soc_3` 和 `elec_soc_4` 均呈线性正相关。
  - 敏感度分析图未能正确生成。

- **符号回归最佳方程**：
  $$
  \text{yhat\_ess5\_down} = 0.000115 \times \text{elec\_soc\_4} \times (\text{elec\_soc\_3})^2
  $$
  *这是一个包含两个特征交互作用的多项式模型。*

## 存在的问题和困难以及解决思路

## 体会和心得

好的，这是一份对您提供的模型分析图表和符号回归结果的综合分析报告。

### 总体模型性能评估

首先，从整体上看，所有目标变量的预测模型性能都*极差*。这一点可以从各个目标变量的“真实值 vs. 预测值”散点图中得到明确的结论：

- **负 R² 值**：所有图表的标题中都显示 R²（决定系数）为负数（例如，`R2=-2.189`, `R2=-0.379`）。R² 为 0 表示模型的预测效果和直接使用数据均值一样差；**负 R² 表示模型的预测结果比直接使用均值还要糟糕**。
- **高 RMSE 值**：均方根误差（RMSE）值普遍较高（例如，20.1, 13.3），表明预测值与真实值之间的偏差很大。
- **散点图分布**：图中的数据点通常聚集在几个离散的区域，远未形成沿着对角线分布的理想形态，这进一步证实了模型未能有效捕捉数据中的规律。

**结论**：当前的模型基本不具备预测能力。尽管如此，下面的分析仍然可以揭示模型从数据中学到的、尽管微弱但最显著的特征关系。

---

### 各目标变量的详细分析

以下将按不同系统（ESS、PV、SOP、WT）对每个目标变量进行具体分析。

#### 一、储能系统 (Energy Storage System - ESS)

##### `yhat_ess1_down`
- **主要影响特征**：`elec_soc_4` 和 `elec_vmax_nonslack`。
- **关系分析**：
  - PDP 图显示 `yhat_ess1_down` 与 `elec_vmax_nonslack` 和 `elec_soc_4` 存在近似线性的正相关关系。
  - 敏感度分析图显示 `elec_vmax_nonslack` 具有最高的局部敏感度。
- **符号回归最佳方程**：
  $$
  \text{yhat\_ess1\_down} = 0.342 \times \text{elec\_soc\_4} \times \sin(\text{elec\_vmax\_nonslack})
  $$
  *这个方程结合了两个主要特征，但其正弦关系与 PDP 图中观察到的线性关系不完全一致，这可能是模型拟合不佳的表现。*

##### `yhat_ess1_up`
- **主要影响特征**：`elec_vmax_nonslack` 和 `elec_soc_5`。
- **关系分析**：
  - PDP 图显示 `yhat_ess1_up` 与 `elec_vmax_nonslack` 和 `elec_soc_5` 均呈线性正相关。
  - 敏感度分析图显示 `elec_vmax_nonslack` 的局部影响最大。
- **符号回归最佳方程**：
  $$
  \text{yhat\_ess1\_up} = 0.00575 \times (\text{elec\_soc\_5})^2 + 0.622 \times \sin(\text{elec\_vmax\_nonslack})
  $$
  *此方程同样识别了这两个特征，但将其建模为二次和正弦关系的和。*

##### `yhat_ess2_down` 和 `yhat_ess3_down`
- **主要影响特征**：`elec_soc_5` (对于 `ess2`) 和 `elec_soc_2` (对于 `ess3`)。
- **关系分析**：
  - PDP 图显示目标变量与各自对应的 `elec_soc` 特征呈线性正相关。
  - 这两个模型的敏感度分析图似乎未能正确生成条形图。
- **符号回归最佳方程**：
  $$
  \text{yhat\_ess2\_down} = 0.00582 \times (\text{elec\_soc\_5})^2
  $$
  $$
  \text{yhat\_ess3\_down} = 0.00574 \times (\text{elec\_soc\_2})^2
  $$
  *符号回归将 PDP 图中的线性关系建模为了一个简单的二次关系。*

##### `yhat_ess2_up`
- **主要影响特征**：`elec_vavg` 和 `elec_soc_2`。
- **关系分析**：
  - PDP 图显示目标变量与 `elec_vavg` 和 `elec_soc_2` 均呈线性正相关。
  - 敏感度分析图显示 `elec_vavg` 的影响最大。
- **符号回归最佳方程**：
  $$
  \text{yhat\_ess2\_up} = \frac{0.00323 \times (\text{elec\_soc\_2})^2}{\cos(\text{elec\_vavg})}
  $$
  *该方程结构复杂，包含二次、余弦和除法运算，表明模型可能在进行过拟合或寻找复杂但无效的模式。*

##### `yhat_ess3_up`
- **主要影响特征**：`elec_vmin` 和 `elec_soc_5`。
- **关系分析**：
  - PDP 图显示 `yhat_ess3_up` 与 `elec_vmin` 呈线性**负**相关，与 `elec_soc_5` 呈线性**正**相关。
  - 敏感度分析图显示 `elec_vmin` 的影响最大。
- **符号回归最佳方程**：
  $$
  \text{yhat\_ess3\_up} = 0.0104 \times (\text{elec\_soc\_5})^2 \times \cos(\text{elec\_vmin})
  $$
  *此方程结合了两个主要特征。*

##### `yhat_ess4_down`
- **主要影响特征**：`elec_vmin` 和 `elec_soc_1`。
- **关系分析**：
  - PDP 图显示 `yhat_ess4_down` 与 `elec_vmin` 呈线性**负**相关，与 `elec_soc_1` 呈线性**正**相关。
  - 敏感度分析图显示 `elec_vmin` 的影响远大于其他特征。
- **符号回归最佳方程**：
  $$
  \text{yhat\_ess4\_down} = 0.00943 \times (\text{elec\_soc\_1})^2 \times \cos(\text{elec\_vmin})
  $$
  *该方程与 `yhat_ess3_up` 的结构相似，反映了 `elec_vmin` 的重要性。*

##### `yhat_ess4_up` 和 `yhat_ess5_up`
- **主要影响特征**：`elec_soc_2` (对于 `ess4`) 和 `elec_soc_5` (对于 `ess5`)。
- **关系分析**：
  - PDP 图显示目标变量与各自对应的 `elec_soc` 特征呈线性正相关。
  - 敏感度分析图未能正确生成。
- **符号回归最佳方程**：
  $$
  \text{yhat\_ess4\_up} = 0.0104 \times (\text{elec\_soc\_2})^2
  $$
  $$
  \text{yhat\_ess5\_up} = 0.00608 \times (\text{elec\_soc\_5})^2
  $$
  *模型再次将线性关系拟合为简单的二次关系。*

##### `yhat_ess5_down`
- **主要影响特征**：`elec_soc_3` 和 `elec_soc_4`。
- **关系分析**：
  - PDP 图显示目标变量与 `elec_soc_3` 和 `elec_soc_4` 均呈线性正相关。
  - 敏感度分析图未能正确生成。
- **符号回归最佳方程**：
  $$
  \text{yhat\_ess5\_down} = 0.000115 \times \text{elec\_soc\_4} \times (\text{elec\_soc\_3})^2
  $$
  *这是一个包含两个特征交互作用的多项式模型。*

#### 二、光伏系统 (Photovoltaic - PV)

对于所有 `yhat_pv` 目标变量（`pv1` 到 `pv6`），分析结果高度一致：
- **主要影响特征**：**`illuminance_lux` (光照强度)** 是唯一且绝对主导的影响特征。
- **关系分析**：
  - 所有 `yhat_pv` 的 PDP 图都显示，目标变量与 `illuminance_lux` 之间存在一条清晰的、强烈的**线性正相关**关系。
  - 对于所有其他特征（如温度、天气、电压等），PDP 图均为水平直线，表明模型认为它们没有影响。
  - 敏感度分析图也清晰地显示，只有 `illuminance_lux` 的条形柱显著高于零。
- **符号回归最佳方程**：
  所有 `yhat_pv` 的最佳方程形式均为一个简单的线性模型：
  $$
  \text{yhat\_pv} = c \times \text{illuminance\_lux}
  $$
  其中 $c$ 是一个小的正常数，例如对于 `yhat_pv1`，$c \approx 0.00026$ 。
- **结论**：对于光伏发电功率的预测，模型完全依赖于光照强度，这符合物理直觉。然而，极差的 R² 值说明，仅靠这一个线性关系远不足以准确预测实际发电量。

#### 三、软开关 (Soft Open Point - SOP)

##### `yhat_sop1_fwd`
- **主要影响特征**：`elec_vmax_nonslack` 和 `elec_line_loading_max`。
- **关系分析**：
  - PDP 图显示，`yhat_sop1_fwd` 与 `elec_vmax_nonslack` 呈线性**负**相关。
  - 与 `elec_line_loading_max` 呈二次（U型）关系。
  - 敏感度分析明确指出 `elec_vmax_nonslack` 是局部影响最大的特征。
- **符号回归最佳方程**：
  $$
  \text{yhat\_sop1\_fwd} = -0.805 \times \text{elec\_vmax\_nonslack} + 0.0001 \times (\text{elec\_line\_loading\_max})^2
  $$
  *这个方程完美地反映了 PDP 图中观察到的线性和二次关系。*

##### `yhat_sop1_rev`
- **主要影响特征**：`elec_line_loading_max`。
- **关系分析**：
  - PDP 图显示 `yhat_sop1_rev` 与 `elec_line_loading_max` 呈一个清晰的二次（开口向上）关系。
  - 敏感度分析图也显示 `elec_line_loading_max` 是唯一有显著影响的特征。
- **符号回归最佳方程**：
  $$
  \text{yhat\_sop1\_rev} = 0.000933 \times (\text{elec\_line\_loading\_max})^2
  $$
  *这是一个简单的二次模型，与 PDP 图和敏感度分析的结果完全一致。*

##### `yhat_sop2_fwd`
- **主要影响特征**：`wind_speed_ms` 和 `is_day`。
- **关系分析**：
  - PDP 图显示了一个非常奇特的关系：`yhat_sop2_fwd` 随着 `wind_speed_ms` 呈现周期性振荡。
  - 与 `is_day` 呈二次关系。
  - 敏感度分析显示 `wind_speed_ms` 影响最大。
- **符号回归最佳方程**：
  $$
  \text{yhat\_sop2\_fwd} = 0.0619 \times (\text{is\_day})^2 + \exp(\exp(\exp(-0.106 \times \sin(\text{wind\_speed\_ms}))))
  $$
  *这是一个结构极其复杂的方程，特别是包含多层指数和正弦函数的部分，这强烈暗示模型可能发生了严重的过拟合或正在学习数据中的噪声，而不是真实的物理关系。*

##### `yhat_sop2_rev`
- **主要影响特征**：`elec_vmax_nonslack` 和 `elec_line_loading_max`。
- **关系分析**：
  - PDP 图显示 `yhat_sop2_rev` 与这两个特征都呈线性**正**相关。
  - 敏感度分析图显示 `elec_vmax_nonslack` 的影响远大于 `elec_line_loading_max`。
- **符号回归最佳方程**：
  $$
  \text{yhat\_sop2\_rev} = \frac{0.101 \times \text{elec\_line\_loading\_max}}{\cos(\text{elec\_vmax\_nonslack})}
  $$
  *虽然识别了相同的特征，但符号回归给出的方程形式（除法和余弦）比 PDP 图中观察到的简单线性关系要复杂得多。*

#### 四、风力涡轮机 (Wind Turbine - WT)

与光伏系统类似，`yhat_wt` 系列的目标变量也表现出高度一致性。

- **主要影响特征**：
  - **`illuminance_lux`** (光照强度) 对 `yhat_wt1` 至 `yhat_wt5` 有最主要的影响。
  - **`temperature_C`** (温度) 对 `yhat_wt6` 有最主要的影响。
  - `hour_sin` 对 `yhat_wt5` 也有一定影响。
- **关系分析**：
  - 对于 `yhat_wt1` 到 `yhat_wt5`，PDP 图、敏感度分析和符号回归均指向 `illuminance_lux` 是决定性特征，关系为线性正相关。
  - 对于 `yhat_wt6`，所有分析方法都指向 `temperature_C` 是决定性特征，关系为线性正相关。
  - PDP 图显示 `yhat_wt5` 与 `hour_sin` 存在线性负相关。
- **符号回归最佳方程**：
  - **`yhat_wt1`, `yhat_wt2`, `yhat_wt3`, `yhat_wt4`**:
    $$
    \text{yhat\_wt} = c \times \text{illuminance\_lux}
    $$
  - **`yhat_wt5`**:
    $$
    \text{yhat\_wt5} = 0.00057 \times \text{illuminance\_lux} - 0.0478 \times \text{hour\_sin}
    $$
  - **`yhat_wt6`**:
    $$
    \text{yhat\_wt6} = 0.890 \times \text{temperature\_C}
    $$
- **结论**：风力发电的预测模型似乎错误地学习了与光照和温度的关系，这在物理上是不合理的（风力发电主要与风速有关）。`wind_speed_ms` 特征在这些模型中几乎没有被使用，这是一个严重的模型缺陷。这表明模型未能从数据中学习到正确的物理规律。

